# 함수 호출 규약(Calling Convention)


## 32bit OS용 호출 규약
>> 32bit OS는 주로 스택을 활용해서 인자를 전달합니다.  
>> 스택은 스택 프레임구조를 형성해서 관리하고,  
>> 함수가 반환될때 인자와 함께 정리합니다.  
>> 리턴 값은 eax 레지스터를 통해 전달합니다.  
```C
__stdcall int add(int a, int b) { return a + b; }
```
>> C언어에서 \_\_stdcall 키워드는 stdcall을 불러옵니다.  
>> stdcall은 바로 Callee에서 스택을 정리하는 방법으로,   
>> 위의 경우에서는 int형 변수 2개가 인자이므로   
>> ret 8 이런식으로 정리를 하겠네요.  
```ASM
push ebp                  // 스택 프레임 생성
mov ebp, esp
mov eax, DWORD PTR SS : [ebp-4]  ( int a )
mov ebx, DWORD PTR SS : [ebp-8]  ( int b )
add eax, ebx
leave
ret 8                     // 스택 정리!
```
